{"ts":1390445187160,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1390445194186,"patch":[[{"diffs":[[1,"<!DOCTYPE HTML>\r\n <html>\r\n   <head>    \r\n    <link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css\" />\r\n    <style>\r\n\tbody {\r\n\t\tmargin: 0px;\r\n\t\tpadding: 0px;\r\n        }\r\n\t#rData{\r\n\t\tfloat:left;\r\n\t\tmargin-left:100px;\r\n\t\tmargin-right:auto;\r\n\t\twidth:470px;\r\n\t}\r\n\t#sData{\r\n\t\tfloat: left;\r\n\t\tmargin-left:100px;\r\n\t\tmargin-right:auto;\r\n\t\twidth:470px;\r\n\t}\r\n\th2{\r\n\t\ttext-align:center;\r\n\t}\r\n        #myCanvas {\r\n\t\tborder: 2px dashed grey;\r\n        }\r\n\t#btnHolder, #sliderTxt{\r\n\ttext-align:center;\r\n\t}\r\n    </style>\r\n        <script src=\"http://code.jquery.com/jquery-1.8.3.js\"></script>\r\n\t<script src=\"http://code.jquery.com/ui/1.9.2/jquery-ui.js\"></script>\r\n\t<script src=\"/socket.io/socket.io.js\"></script>\r\n    <script>\r\n\t// canvas request for all browsers\r\n\twindow.requestAnimFrame = (function(callback) {\r\n        return window.requestAnimationFrame || \r\n        window.webkitRequestAnimationFrame || \r\n        window.mozRequestAnimationFrame || \r\n        window.oRequestAnimationFrame || \r\n        window.msRequestAnimationFrame ||\r\n        function(callback) {\r\n          window.setTimeout(callback, 1000 / 30); // 30 frames per second\r\n\t  };\r\n\t})();\r\n\t  \r\n\tvar iosocket;\r\n\tvar pollOneH = 0;\r\n\tvar poll1;\r\n\tvar text;\r\n\tvar potValue;\r\n\tvar prevPotValue;\r\n\t//var onOff = false; \r\n\tvar toggleVal = 0;\r\n\t  \r\n\tfunction animation(poll1,text)\r\n\t{\r\n\t  var canvas = document.getElementById(\"myCanvas\");\r\n          var content = canvas.getContext(\"2d\");\r\n\t\t\t\r\n\t  // clear canvas\r\n\t  content.clearRect(0, 0, 460, 540);\r\n\t  \r\n\t  content.fillStyle = 'black';\r\n\t  content.textAlign = 'center';\r\n\t  content.font = '20pt Calibri';\r\n\t  \r\n\t  // make the wobbely values stop \r\n\t  if(pollOneH*2 > prevPotValue+2 || pollOneH*2 < prevPotValue-2){\r\n\t\tprevPotValue = potValue;\r\n\t\tpotValue = pollOneH*2;\r\n\t  }\r\n\r\n\t  content.fillText('Potmeter value: ' + potValue, text.x, text.y);\r\n\r\n          // render graph \r\n\t  content.fillStyle = 'orange';\r\n\t  content.fillRect(poll1.x,(poll1.y-poll1.h),poll1.w,poll1.h);\r\n\t\t\t\t\t\t\r\n\t  content.fill();\r\n\r\n\t  // request new frame\r\n\t  requestAnimFrame(function() {\r\n\t  \r\n\t  if(poll1.h < pollOneH){\r\n\t\tpoll1.h += (pollOneH - poll1.h)*.15;\r\n\t  }\r\n\t  else if(poll1.h > pollOneH){\r\n\t\tpoll1.h -= (poll1.h - pollOneH)*.15;\r\n\t  }\r\n\t  text.y = (poll1.y - poll1.h) - 5;\r\n\t  animation(poll1,text);\r\n\t });\r\n\t}\r\n\t  \r\n\tfunction initSocketIO()\r\n\t{\r\n\t\tiosocket = io.connect();\r\n\t\tiosocket.on('onconnection', function(value) {\r\n\t\tpollOneH = value.pollOneValue/2; // recieve start poll value from server\r\n\t\tinitPoll();\r\n\t\tinitButton();\r\n\t\tinitSlider();\r\n\t\t\t\t\r\n\t\t// recieve changed values by other client from server\r\n\t\tiosocket.on('updateData', function (recievedData) {\r\n\t\t\tpollOneH = recievedData.pollOneValue/2; // recieve start poll value from server\r\n\t\t});\r\n\t    });\r\n\t}\r\n\t  \r\n\tfunction initPoll()\r\n\t{\r\n\t   poll1 = {\r\n\t\tx: 10,\r\n\t\ty: 540,\r\n\t\tw: 440,\r\n\t\th: 0\r\n\t   }\r\n\t   text = {\r\n\t\tx:poll1.w/2,\r\n\t\ty:100\r\n\t   }\r\n\t   potValue = pollOneH*2;\r\n\t   prevPotValue = potValue;\r\n\t   animation(poll1,text);\r\n\t}\r\n\t\r\n\tfunction initButton()\r\n\t{\r\n\t   $( \"#check\" ).button();\r\n\t}\r\n\t\r\n\tfunction initSlider()\r\n\t{\r\n\t     $( \"#slider\" ).slider({\r\n\t     min:0,\r\n\t     max:255,\r\n\t     change: function(event,ui) {\r\n\t        iosocket.emit('sliderval',ui.value);\r\n\t        }\r\n\t     });\r\n\t}\r\n\t\r\n\twindow.onload = function() {\r\n\t     initSocketIO();\r\n        };\r\n      \r\n      $(document).ready(function() {\r\n        $('#check').click(function() {\r\n            toggleVal += 1;\r\n\t    toggleVal %= 2;\r\n\t    iosocket.emit('buttonval',toggleVal);\r\n\t });\r\n\t});\r\n    </script>\r\n  </head>\r\n  <body>\r\n   <div id=\"rData\">\r\n\t<h2>Data from Arduino</h2>\r\n    <canvas id=\"myCanvas\" width=\"460\" height=\"540\"></canvas>\r\n   </div>\r\n       <div id=\"sData\">\r\n\t<h2>Data to Arduino</h2>\r\n\t<div id=\"btnHolder\">\r\n\t  <input type=\"checkbox\" id=\"check\" value=\"toggle\"/><label for=\"check\">Toggle LED</label>\r\n\t</div>\r\n\t<p id=\"sliderTxt\">LED Dimmer</p>\r\n\t<div id=\"slider\"></div>\r\n   </div> \r\n  </body>\r\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":3982}]],"length":3982,"saved":false}
